set shell := ["bash", "-c"]

install-ublue-repos:
    #!/bin/bash
    # dnf copr enable ublue/os-akmods
    # Terra
    # dnf config-manager add-repo --from-repofile=https://github.com/terrapkg/subatomic-repos/raw/main/terra.repo
    # dnf install terra-release -y
    # Github CLI
    dnf install -y dnf-plugins
    dnf config-manager addrepo --from-repofile=https://cli.github.com/packages/rpm/gh-cli.repo
    # ACT local gihub actions
    dnf -y copr enable goncalossilva/act
    # VSCode
    rpm --import https://packages.microsoft.com/keys/microsoft.asc
    echo -e "[code]\nname=Visual Studio Code\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\nenabled=1\nautorefresh=1\ntype=rpm-md\ngpgcheck=1\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc" | tee /etc/yum.repos.d/vscode.repo > /dev/null
    # # Tailscale
    # dnf config-manager addrepo --from-repofile=https://pkgs.tailscale.com/stable/fedora/tailscale.repo
    cat <<EOF > /etc/yum.repos.d/adoptium.repo
    [Adoptium]
    name=Adoptium
    baseurl=https://packages.adoptium.net/artifactory/rpm/fedora/42/$(uname -m)
    enabled=1
    gpgcheck=1
    gpgkey=https://packages.adoptium.net/artifactory/api/gpg/key/public
    EOF
    copr enable -y scottames/ghostty
    dnf check

install-ansible:
    dnf install -y \
        ansible \
        python3-ansible-lint \
        ansible-core-doc \
        ansible-bender \
        ansible-builder \
        ansible-collection-ansible-netcommon \
        ansible-collection-ansible-netcommon-doc \
        ansible-collection-ansible-posix \
        ansible-collection-ansible-utils \
        ansible-collection-community-crypto \
        ansible-collection-community-docker \
        ansible-collection-community-general \
        ansible-collection-community-kubernetes \
        ansible-collection-community-mysql \
        ansible-collection-community-postgresql \
        ansible-collection-community-rabbitmq \
        ansible-collection-containers-podman \
        ansible-collection-kubernetes-core \
        ansible-collection-community-libvirt

install-java:
    dnf install -y \
    java-21-openjdk

install-kde-utils:
    dnf install -y \
        kmail \
        merkuro \
        konsole \
        plasma-discover-flatpak \
        plasma-discover-rpm-ostree \
        yakuake \
        qt6-qtlocation \
        chromium-qt6-ui \
        fedora-chromium-config-kde \
        kde-partitionmanager \
        qt6-qtwebsockets

install-misc-tools:
    dnf install -y \
        waypipe \
        tailscale \
        zsh \
        input-leap \
        rclone \
        mpv \
        borgmatic \
        sqlite-devel \
        ghostty \
        chromium \
        chromium-headless \
        chromedriver
        
install-vm-tools:
    dnf install -y \
        virt-install \
        virt-manager